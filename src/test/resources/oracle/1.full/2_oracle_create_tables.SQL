-- ------------------------------准备工作 准备业务表的记录表---------------------------------------------------
-- ！！！ 运行该脚本前先确保运行 oracle_init_procedure.SQL


BEGIN
  proc_create_table(
      'DATABASE_KEYWORD',
      'CREATE TABLE "DATABASE_KEYWORD" (
            "ID" NUMBER(11) NOT NULL ,
            "KEY_WORD" NVARCHAR2(50) DEFAULT NULL ,
            "DATA_BASE_TYPE" NVARCHAR2(128) DEFAULT NULL
        )'
  );
END;
/
COMMENT ON COLUMN "DATABASE_KEYWORD"."KEY_WORD" IS '关键字';
COMMENT ON COLUMN "DATABASE_KEYWORD"."DATA_BASE_TYPE" IS '数据库类型 Mysql,Oracle';
/


-- ==================
-- 修改表结构更新位置
-- ==================
begin
  proc_create_table('SYS_UPDATE_HISTORY',
'CREATE TABLE "SYS_UPDATE_HISTORY" (
  "ID" NUMBER(11) NOT NULL ,
  "UPDATE_RANGE" NVARCHAR2(50) NOT NULL ,
  "OPERATE_TYPE" NVARCHAR2(50) NOT NULL ,
  "OPERATE_STATUS" NVARCHAR2(50) NOT NULL ,
  "DETAIL" NCLOB NOT NULL ,
  "REMARK" NVARCHAR2(200) ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_UPDATE_HISTORY"."UPDATE_RANGE" IS '更新范围 [SQL、LICENSE]';
COMMENT ON COLUMN "SYS_UPDATE_HISTORY"."OPERATE_TYPE" IS '操作类型 [UPDATE、INIT]';
COMMENT ON COLUMN "SYS_UPDATE_HISTORY"."OPERATE_STATUS" IS '操作状态 [START、FAILED, SUCCEEDED]';
COMMENT ON COLUMN "SYS_UPDATE_HISTORY"."DETAIL" IS '更新细节';
COMMENT ON COLUMN "SYS_UPDATE_HISTORY"."REMARK" IS '更新备注';
COMMENT ON TABLE "SYS_UPDATE_HISTORY" IS '更新历史表';
/

begin
  proc_create_table('SYS_CONFIG',
'CREATE TABLE "SYS_CONFIG" (
  "ID" NUMBER(11) NOT NULL ,
  "TYPE" NVARCHAR2(128) NOT NULL ,
  "SUB_TYPE" NVARCHAR2(128) NOT NULL ,
  "CONFIG_KEY" NVARCHAR2(128) NOT NULL ,
  "CONFIG_VALUE" NCLOB ,
  "REMARK" NVARCHAR2(500) ,
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE ,
  "UPDATED_BY" NVARCHAR2(50) ,
  "UPDATED_DT" DATE
)');
end;
/
begin
    proc_create_unique_key ('SYS_CONFIG','UK_SYS_CONFIG','TYPE,SUB_TYPE,CONFIG_KEY');
end;
/
COMMENT ON COLUMN "SYS_CONFIG"."TYPE" IS '分类，按子产品区分，取值[DMP-数据平台，GAP-分析平台]';
COMMENT ON COLUMN "SYS_CONFIG"."SUB_TYPE" IS '子分类，按用途区分，如：URL';
COMMENT ON COLUMN "SYS_CONFIG"."CONFIG_KEY" IS '键，如：gap.external.manager.url.graph-search-arango';
COMMENT ON COLUMN "SYS_CONFIG"."CONFIG_VALUE" IS '值';
COMMENT ON COLUMN "SYS_CONFIG"."REMARK" IS '备注';
COMMENT ON COLUMN "SYS_CONFIG"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON TABLE "SYS_CONFIG" IS '系统配置';
/

begin
  proc_create_table('SYS_DICT',
  'CREATE TABLE "SYS_DICT" (
  "ID" NUMBER(11) NOT NULL ,
  "DICT_KEY" NVARCHAR2(50) NOT NULL ,
  "DICT_VALUE" NVARCHAR2(200) NOT NULL ,
  "PARENT_CODE" NVARCHAR2(30) NOT NULL ,
  "DICT_CODE" NVARCHAR2(30) NOT NULL,
  "USAGE_TYPE" NVARCHAR2(30) ,
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE ,
  "UPDATED_BY" NVARCHAR2(50) ,
  "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_DICT"."DICT_KEY" IS '字典健，只能使用大写英文加下划线';
COMMENT ON COLUMN "SYS_DICT"."DICT_VALUE" IS '字典值';
COMMENT ON COLUMN "SYS_DICT"."PARENT_CODE" IS '父ID，根节点默认为PARENT';
COMMENT ON COLUMN "SYS_DICT"."DICT_CODE" IS '字典code,由parent.dict_value 和 自身dict_value组成';
COMMENT ON COLUMN "SYS_DICT"."USAGE_TYPE" IS '数据源用途[IN-平台数据源，OUT-外部数据源，ALL-全部]';
COMMENT ON COLUMN "SYS_DICT"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON TABLE "SYS_DICT" IS '数据字典';
/

begin
  proc_create_table('SYS_RESOURCE',
  'CREATE TABLE "SYS_RESOURCE" (
  "ID" NUMBER(11) NOT NULL ,
  "NAME" NVARCHAR2(50) NOT NULL ,
  "TYPE" NVARCHAR2(30) NOT NULL ,
  "SUB_TYPE" NVARCHAR2(30) ,
  "PARENT_RESOURCE_CODE" NVARCHAR2(256) NOT NULL ,
  "ROOT_MENU" NVARCHAR2(25) DEFAULT NULL,
  "GROUP_TYPE" NVARCHAR2(30) ,
  "CODE" NVARCHAR2(50) ,
  "RESOURCE_CODE" NVARCHAR2(200) ,
  "URL" NVARCHAR2(200) ,
  "ROLES_LIMIT" NVARCHAR2(200),
  "REMARK" NVARCHAR2(200) ,
  "RESOURCE_SOURCE" NVARCHAR2(50) NOT NULL,
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE ,
  "UPDATED_BY" NVARCHAR2(50) ,
  "UPDATED_DT" DATE ,
  "NODE_TYPE_ENABLE_LOG" NVARCHAR2(10) ,
  "OPERATION_ITEM_TEMPLATE" NCLOB ,
  "FUNCTION_MODULE" NVARCHAR2(50) ,
  "UI_CATEGORY" NVARCHAR2(50) ,
  "OPERATION_DETAIL_TEMPLATE" NCLOB
)');
end;
/
COMMENT ON COLUMN "SYS_RESOURCE"."NAME" IS '资源名称';
COMMENT ON COLUMN "SYS_RESOURCE"."TYPE" IS '类型，按子产品或模块划分，取值[SYS-系统模块，DMP-数据平台，GAP-分析平台，KIP-挖掘平台]';
COMMENT ON COLUMN "SYS_RESOURCE"."SUB_TYPE" IS '子类型,主要是分析平台GAP权限使用,因为应用平台 如:DAP，KAP';
COMMENT ON COLUMN "SYS_RESOURCE"."PARENT_RESOURCE_CODE" IS '父资源唯一编码，注意根资源的父资源需要设置为 parent_resource_code，代码写死逻辑';
COMMENT ON COLUMN "SYS_RESOURCE"."ROOT_MENU" IS '根菜单, SYSTEM_MANAGE-系统管理, KNOWLEDGE_MANAGE-知识管理，DATA_MANAGE-数据管理, PROJECT_MANAGE-项目管理（项目级权限）, FOREGROUND_APPLICATION-前台应用, SERVICE_PUBLISH-服务发布';
COMMENT ON COLUMN "SYS_RESOURCE"."GROUP_TYPE" IS '权限分组，主要是分析平台GAP权限使用,取值[系统级权限S、项目级权限P、服务菜单权限SERVICE,场景探索菜单权限EXPLORE';
COMMENT ON COLUMN "SYS_RESOURCE"."CODE" IS '权限code,前端使用';
COMMENT ON COLUMN "SYS_RESOURCE"."RESOURCE_CODE" IS '资源唯一编码,license控制使用';
COMMENT ON COLUMN "SYS_RESOURCE"."URL" IS '资源访问URL地址';
COMMENT ON COLUMN "SYS_RESOURCE"."ROLES_LIMIT" IS '角色限制，代表仅有限定的角色拥有该权限，逗号分隔，该权限无法被客户分配，取值[CUSTOMIZABLE无限制，SUPER_ADMIN超管，PROJECT_ADMIN项目管理员]';
COMMENT ON COLUMN "SYS_RESOURCE"."REMARK" IS '备注';
COMMENT ON COLUMN "SYS_RESOURCE"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON COLUMN "SYS_RESOURCE"."NODE_TYPE_ENABLE_LOG" IS '节点类型与是否开启日志，Y代表开启日志，N代表关闭日志，取值[RESOURCE权限节点，LOG_Y日志节点且开启日志，LOG_N日志节点且关闭日志，ALL_Y拥有所有节点类型且开启日志，ALL_N拥有所有节点类型且关闭日志]';
COMMENT ON COLUMN "SYS_RESOURCE"."OPERATION_ITEM_TEMPLATE" IS '操作事项模版';
COMMENT ON COLUMN "SYS_RESOURCE"."FUNCTION_MODULE" IS '功能模块';
COMMENT ON COLUMN "SYS_RESOURCE"."UI_CATEGORY" IS '界面分类';
COMMENT ON COLUMN "SYS_RESOURCE"."OPERATION_DETAIL_TEMPLATE" IS '操作详情模版';
COMMENT ON COLUMN "SYS_RESOURCE"."RESOURCE_SOURCE" IS '资源来源[GRAPH-图平台，EAP-知识抽取平台, KQA-知识问答]';
COMMENT ON TABLE "SYS_RESOURCE" IS '资源';
ALTER TABLE "SYS_RESOURCE" MODIFY ("ROLES_LIMIT" DEFAULT 'CUSTOMIZABLE');
/

begin
  proc_create_table('SYS_USER_OPERATION_LOG',
  'CREATE TABLE "SYS_USER_OPERATION_LOG" (
  "ID" NUMBER(11) NOT NULL ,
  "OPERATION_ITEM" NVARCHAR2(1000),
  "FUNCTION_MODULE" NVARCHAR2(50) ,
  "UI_CATEGORY" NVARCHAR2(50) ,
  "PROJECT_ORG_ID" NUMBER(11) ,
  "ORG_NAME" NVARCHAR2(500) ,
  "CREATOR_NAME" NVARCHAR2(50) ,
  "CREATOR_NAME_CN" NVARCHAR2(50) ,
  "SYS_ROLE" NVARCHAR2(300) ,
  "OPERATION_IP" NVARCHAR2(100) ,
  "CREATED_DT" DATE ,
  "PROJECT_ID" NUMBER(11) ,
  "PROJECT_NAME" NVARCHAR2(50) ,
  "PROJECT_ROLE" NVARCHAR2(100) ,
  "REQUEST" NCLOB ,
  "RESPONSE" NCLOB ,
  "RESOURCE_CODE" NVARCHAR2(200) ,
  "OPERATION_DETAIL" NCLOB
)');
end;
/
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."OPERATION_ITEM" IS '操作事项';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."FUNCTION_MODULE" IS '功能模块';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."UI_CATEGORY" IS '界面分类';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."PROJECT_ORG_ID" IS '组织机构id';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."ORG_NAME" IS '组织机构';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."CREATOR_NAME" IS '创建人英文名';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."CREATOR_NAME_CN" IS '创建人中文名';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."SYS_ROLE" IS '系统角色';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."OPERATION_IP" IS '操作IP';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."PROJECT_ID" IS '项目id';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."PROJECT_NAME" IS '当前项目名';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."PROJECT_ROLE" IS '项目角色';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."REQUEST" IS '请求体，JSON对象';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."RESPONSE" IS '返回体，JSON对象';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."RESOURCE_CODE" IS '资源唯一编码,license控制使用';
COMMENT ON COLUMN "SYS_USER_OPERATION_LOG"."OPERATION_DETAIL" IS '操作详情模板，JSON对象';
COMMENT ON TABLE "SYS_USER_OPERATION_LOG" IS '用户操作日志';
/

begin
  proc_create_table('SYS_ROLE',
  'CREATE TABLE "SYS_ROLE" (
  "ID" NUMBER(11) NOT NULL ,
  "NAME" NVARCHAR2(50) NOT NULL ,
  "REMARK" NVARCHAR2(200) ,
  "CODE" NVARCHAR2(255) ,
  "ROLE_SOURCE" NVARCHAR2(50),
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE ,
  "UPDATED_BY" NVARCHAR2(50) ,
  "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_ROLE"."NAME" IS '角色名称';
COMMENT ON COLUMN "SYS_ROLE"."REMARK" IS '备注';
COMMENT ON COLUMN "SYS_ROLE"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON TABLE "SYS_ROLE" IS '角色';
COMMENT ON COLUMN "SYS_ROLE"."ROLE_SOURCE" IS '[GRAPH-图平台， EAP-知识抽取平台，KQA-知识问答]';
/

-- DROP TABLE "SYS_ORG_ROLE";
begin
  proc_create_table('SYS_ORG_ROLE',
'CREATE TABLE "SYS_ORG_ROLE" (
  "ID" NUMBER(11) NOT NULL ,
  "SYS_ROLE_ID" NUMBER(11) NOT NULL ,
  "SYS_ORG_ID" NUMBER(11) NOT NULL
)');
end;
/
COMMENT ON COLUMN "SYS_ORG_ROLE"."SYS_ROLE_ID" IS 'SYS_USER_ROLE.ID';
COMMENT ON COLUMN "SYS_ORG_ROLE"."SYS_ORG_ID" IS 'SYS_ORG.ID';
COMMENT ON TABLE "SYS_ORG_ROLE" IS '系统组织与系统角色';
/

begin
  proc_create_table('SYS_ROLE_RESOURCE',
  'CREATE TABLE "SYS_ROLE_RESOURCE" (
  "ID" NUMBER(11) NOT NULL ,
  "ROLE_ID" NUMBER(11) NOT NULL ,
  "RESOURCE_CODE" NVARCHAR2(256) NOT NULL
)');
end;
/
COMMENT ON COLUMN "SYS_ROLE_RESOURCE"."ROLE_ID" IS 'sys_role.id';
COMMENT ON COLUMN "SYS_ROLE_RESOURCE"."RESOURCE_CODE" IS '资源唯一编码,sys_resource.resource_code';
COMMENT ON TABLE "SYS_ROLE_RESOURCE" IS '角色与资源';
/


begin
  proc_create_table('SYS_USER',
  'CREATE TABLE "SYS_USER" (
  "ID" NUMBER(11) NOT NULL ,
  "USER_NO" NVARCHAR2(128) NOT NULL ,
  "PASSWORD" NVARCHAR2(128) ,
  "NAME" NVARCHAR2(50) NOT NULL ,
  "PHONE" NVARCHAR2(20) ,
  "EMAIL" NVARCHAR2(128) ,
  "STATUS" NUMBER(4) NOT NULL ,
  "ATTR1" NVARCHAR2(255) ,
  "USER_SOURCE" NVARCHAR2(30) NOT NULL ,
  "LAST_LOGIN_TIME" DATE,
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE ,
  "UPDATED_BY" NVARCHAR2(50) ,
  "UPDATED_DT" DATE
)');
end;
/
begin
    proc_create_unique_key ('SYS_USER','UK_SYS_USER','USER_NO');
end;
/
ALTER TABLE SYS_USER MODIFY ("STATUS" DEFAULT 1);
COMMENT ON COLUMN "SYS_USER"."USER_NO" IS '用户名-登录';
COMMENT ON COLUMN "SYS_USER"."PASSWORD" IS '登录密码';
COMMENT ON COLUMN "SYS_USER"."NAME" IS '姓名';
COMMENT ON COLUMN "SYS_USER"."PHONE" IS '手机';
COMMENT ON COLUMN "SYS_USER"."EMAIL" IS '邮箱';
COMMENT ON COLUMN "SYS_USER"."STATUS" IS '状态，取值[1-正常，0-冻结]';
COMMENT ON COLUMN "SYS_USER"."ATTR1" IS '身份证号列名增加';
COMMENT ON COLUMN "SYS_USER"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON COLUMN "SYS_USER"."USER_SOURCE" IS '用户来源:[SSO-单点登录,SYS_CREATION-系统创建,EAP-知识抽取平台,KQA-知识问答]';
COMMENT ON COLUMN "SYS_USER"."LAST_LOGIN_TIME" IS '上次登陆时间';
COMMENT ON TABLE "SYS_USER" IS '用户';
/

-- drop table SYS_USER_SESSION;
begin
  proc_create_table('SYS_USER_SESSION',
  'CREATE TABLE "SYS_USER_SESSION" (
    "ID" NUMBER(11) NOT NULL,
    "USER_ID" NUMBER(11),
    "SESSION_ID" NVARCHAR2(50),
    "SESSION_DATA" NCLOB,
    "ENABLED_FLAG" NCHAR(1) NOT NULL,
    "CREATED_BY" NVARCHAR2(50),
    "CREATED_DT" DATE,
    "UPDATED_BY" NVARCHAR2(50),
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON TABLE "SYS_USER_SESSION" IS '用户登录session信息表';
COMMENT ON COLUMN "SYS_USER_SESSION"."USER_ID" IS 'SYS_USER.ID';
COMMENT ON COLUMN "SYS_USER_SESSION"."SESSION_ID" IS '用户登录sessionId';
COMMENT ON COLUMN "SYS_USER_SESSION"."SESSION_DATA" IS '用户登录session信息';
/

-- drop table SYS_USER_LOGIN_INFO;
begin
  proc_create_table('SYS_USER_LOGIN_INFO',
  'CREATE TABLE "SYS_USER_LOGIN_INFO" (
    "ID" NUMBER(11) NOT NULL,
    "USER_ID" NUMBER(11),
    "ROLE_ID" NUMBER(11),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_USER_LOGIN_INFO"."USER_ID" IS '登录用户ID，SYS_USER.ID';
COMMENT ON COLUMN "SYS_USER_LOGIN_INFO"."ROLE_ID" IS '用户当前登录角色ID，SYS_ROLE.ID';
COMMENT ON TABLE "SYS_USER_LOGIN_INFO" IS '用户登录信息表';
/


begin
  proc_create_table('SYS_USER_ROLE',
  'CREATE TABLE "SYS_USER_ROLE" (
  "ID" NUMBER(11) NOT NULL ,
  "USER_ID" NUMBER(11) NOT NULL ,
  "ROLE_ID" NUMBER(11) NOT NULL ,
  "SOURCE_TYPE" NVARCHAR2(20) NOT NULL ,
  "SOURCE_ID" NUMBER(11)
)');
end;
/
COMMENT ON COLUMN "SYS_USER_ROLE"."USER_ID" IS 'SYS_USER.ID';
COMMENT ON COLUMN "SYS_USER_ROLE"."ROLE_ID" IS 'SYS_ROLE.ID';
COMMENT ON COLUMN "SYS_USER_ROLE"."SOURCE_TYPE" IS '角色来源类型，SYS_ORG-系统组织，SYS_ROLE-系统管理-角色管理-添加的角色';
COMMENT ON COLUMN "SYS_USER_ROLE"."SOURCE_ID" IS '角色来源ID';
COMMENT ON TABLE "SYS_USER_ROLE" IS '用户与角色';
/

begin
  proc_create_table('SYS_ORG',
  'CREATE TABLE "SYS_ORG" (
  "ID" NUMBER(11) NOT NULL ,
  "NAME" NVARCHAR2(50) NOT NULL ,
  "ORG_CODE" NVARCHAR2(256) ,
  "ORG_LEVEL" NUMBER(11) NOT NULL ,
  "REMARK" NVARCHAR2(500) ,
  "PARENT_IDS" NVARCHAR2(500) NOT NULL ,
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NVARCHAR2(50) ,
  "CREATED_DT" DATE ,
  "UPDATED_BY" NVARCHAR2(50) ,
  "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_ORG"."NAME" IS '系统组织名称';
COMMENT ON COLUMN "SYS_ORG"."ORG_CODE" IS '组织编码';
COMMENT ON COLUMN "SYS_ORG"."ORG_LEVEL" IS '系统组织层级，系统的默认顶级组织层级为0';
COMMENT ON COLUMN "SYS_ORG"."REMARK" IS '备注';
COMMENT ON COLUMN "SYS_ORG"."PARENT_IDS" IS '父节点id列表,样例:[1][2][3]';
COMMENT ON COLUMN "SYS_ORG"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON TABLE "SYS_ORG" IS '系统组织';
/

begin
  proc_create_table('SYS_ORG_USER',
  'CREATE TABLE "SYS_ORG_USER" (
  "ID" NUMBER(11) NOT NULL ,
  "SYS_ORG_ID" NUMBER(11) NOT NULL ,
  "USER_ID" NUMBER(11) NOT NULL ,
  "STATUS"  NUMBER(4) NOT NULL
)');
end;
/
COMMENT ON COLUMN "SYS_ORG_USER"."SYS_ORG_ID" IS 'sys_org.id';
COMMENT ON COLUMN "SYS_ORG_USER"."USER_ID" IS 'sys_user.id';
COMMENT ON COLUMN "SYS_ORG_USER"."STATUS" IS '状态:0-停用,1-正常';
COMMENT ON TABLE "SYS_ORG_USER" IS '系统组织与成员';
/

-- license
begin
  proc_create_table('SYS_LICENSE',
  'CREATE TABLE "SYS_LICENSE" (
	"ID" NUMBER(11) NOT NULL ,
    "LICENSE_SERIAL_NO" NVARCHAR2(100),
    "LICENSE_CONTENT" NCLOB,
    "LICENSE_APPENDED" NCLOB,
    "ENABLED_FLAG" NCHAR(1)  NOT NULL ,
    "CREATED_BY" NVARCHAR2(50),
    "CREATED_DT" DATE,
    "UPDATED_BY" NVARCHAR2(50),
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_LICENSE"."LICENSE_SERIAL_NO" IS '授权证书编码';
COMMENT ON COLUMN "SYS_LICENSE"."LICENSE_CONTENT" IS 'license加密内容';
COMMENT ON COLUMN "SYS_LICENSE"."LICENSE_APPENDED" IS '追加内容';
COMMENT ON COLUMN "SYS_LICENSE"."ENABLED_FLAG" IS '可用状态:Y-是;N-否';
COMMENT ON TABLE "SYS_LICENSE"  IS 'license';
ALTER TABLE "SYS_LICENSE" MODIFY ("ENABLED_FLAG" DEFAULT 'Y');
/


-- license资源与系统资源关联表
begin
  proc_create_table('SYS_LICENSE_RESOURCE',
  'CREATE TABLE "SYS_LICENSE_RESOURCE" (
	"ID" NUMBER(11) NOT NULL,
    "SYS_RESOURCE_CODE" NVARCHAR2(200),
    "PRODUCT_RESOURCE_CODE" NVARCHAR2(200),
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYS_LICENSE_RESOURCE"."SYS_RESOURCE_CODE" IS '系统资源唯一编码';
COMMENT ON COLUMN "SYS_LICENSE_RESOURCE"."PRODUCT_RESOURCE_CODE" IS 'license资源唯一编码';
COMMENT ON TABLE "SYS_LICENSE_RESOURCE"  IS 'license资源与系统资源关联表';
/


-- 表：同步批次信息（sync_batch_info）
begin
  proc_create_table('SYNC_BATCH_INFO',
  'CREATE TABLE "SYNC_BATCH_INFO" (
	"ID" NUMBER(11) NOT NULL,
    "BATCH_NO" NVARCHAR2(128),
    "SYNC_TYPE" NVARCHAR2(32),
    "STATE" NVARCHAR2(32),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SYNC_BATCH_INFO"."BATCH_NO" IS '同步批次';
COMMENT ON COLUMN "SYNC_BATCH_INFO"."STATE" IS '处理状态，值范围：pending-准备中、prepared-准备完成、synchronizing-同步中、synchronized-同步完成，sync_error-同步异常';
COMMENT ON COLUMN "SYNC_BATCH_INFO"."SYNC_TYPE" IS '同步类型 SYNC_ORIGIN_DATA-同步原始数据、SYNC_APP_SUB-同步统计应用子图对应的实体关系数量、SYNC_COMMON-同步统计通用图谱、SYNC_TABLE-同步统计表';
COMMENT ON COLUMN "SYNC_BATCH_INFO"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "SYNC_BATCH_INFO"."UPDATED_DT" IS '更新时间';
COMMENT ON TABLE "SYNC_BATCH_INFO" IS '同步批次信息';
/

-- 表：原始通用图谱信息(origin_common_graph)
begin
  proc_create_table('ORIGIN_COMMON_GRAPH',
  'CREATE TABLE "ORIGIN_COMMON_GRAPH" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "OP_TYPE" NVARCHAR2(32),
    "ORG" NVARCHAR2(128),
    "BATCH_NO" NVARCHAR2(128),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."KEY" IS '图谱唯一标识';
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."NAME_CN" IS '图谱中文名称';
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."NAME" IS '图谱英文名称';
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."OP_TYPE" IS '操作类型,值范围：upsert-新增或更新，delete-删除';
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."ORG" IS '所属组织';
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."BATCH_NO" IS '同步批次';
COMMENT ON COLUMN "ORIGIN_COMMON_GRAPH"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "ORIGIN_COMMON_GRAPH" IS '原始通用图谱信息';
/

-- 表：原始应用子图信息(origin_app_sub_graph)
begin
  proc_create_table('ORIGIN_APP_SUB_GRAPH',
  'CREATE TABLE "ORIGIN_APP_SUB_GRAPH" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "TABLE_KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "SPACE" NVARCHAR2(128),
    "OP_TYPE" NVARCHAR2(32),
    "ORG" NVARCHAR2(128),
    "BATCH_NO" NVARCHAR2(128),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."KEY" IS '图谱唯一标识';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."TABLE_KEY" IS '关联表唯一标识';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."NAME_CN" IS '图谱中文名称';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."NAME" IS '图谱英文名称';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."SPACE" IS '子图空间';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."OP_TYPE" IS '操作类型,值范围：upsert-新增或更新，delete-删除';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."ORG" IS '所属组织';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."BATCH_NO" IS '同步批次';
COMMENT ON COLUMN "ORIGIN_APP_SUB_GRAPH"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "ORIGIN_APP_SUB_GRAPH" IS '原始应用子图信息';
/

-- 表：原始表关系起点与终点
begin
  proc_create_table('ORIGIN_EDGE_RELATION',
  'CREATE TABLE "ORIGIN_EDGE_RELATION" (
	  "ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "START_NODE_NAME" NVARCHAR2(128),
    "START_NODE_NAMECN" NVARCHAR2(128),
    "END_NODE_NAME" NVARCHAR2(128),
    "END_NODE_NAMECN" NVARCHAR2(128),
    "OP_TYPE" NVARCHAR2(32),
    "BATCH_NO" NVARCHAR2(128),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."KEY" IS '关联表唯一标识';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."START_NODE_NAME" IS '起点实体表英文名称';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."START_NODE_NAMECN" IS '起点实体表中文名称';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."END_NODE_NAME" IS '结束实体表英文名称';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."END_NODE_NAMECN" IS '结束实体表中文名称';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."OP_TYPE" IS '操作类型,值范围：upsert-新增或更新，delete-删除';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."BATCH_NO" IS '同步批次';
COMMENT ON COLUMN "ORIGIN_EDGE_RELATION"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "ORIGIN_EDGE_RELATION" IS '原始表关系起点与终点';
/

-- 表：原始表信息(origin_table)
begin
  proc_create_table('ORIGIN_TABLE',
  'CREATE TABLE "ORIGIN_TABLE" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "GRAPH_KEY" NVARCHAR2(128),
    "TYPE" NVARCHAR2(32),
    "DESCR" NVARCHAR2(1024),
    "AMOUNT" NUMBER,
    "OP_TYPE" NVARCHAR2(32),
    "BATCH_NO" NVARCHAR2(128),
    "DIRECTED" NUMBER(1),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ORIGIN_TABLE"."KEY" IS '表唯一标识';
COMMENT ON COLUMN "ORIGIN_TABLE"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "ORIGIN_TABLE"."NAME" IS '表英文名称';
COMMENT ON COLUMN "ORIGIN_TABLE"."GRAPH_KEY" IS '关联图谱唯一标识';
COMMENT ON COLUMN "ORIGIN_TABLE"."TYPE" IS '表类型，值范围：node-实体，edge-关系';
COMMENT ON COLUMN "ORIGIN_TABLE"."DESCR" IS '表描述';
COMMENT ON COLUMN "ORIGIN_TABLE"."AMOUNT" IS '记录条数';
COMMENT ON COLUMN "ORIGIN_TABLE"."OP_TYPE" IS '操作类型,值范围：upsert-新增或更新，delete-删除';
COMMENT ON COLUMN "ORIGIN_TABLE"."DIRECTED" IS '是否有方向';
COMMENT ON COLUMN "ORIGIN_TABLE"."BATCH_NO" IS '同步批次';
COMMENT ON COLUMN "ORIGIN_TABLE"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "ORIGIN_TABLE" IS '原始表信息';
/

-- 表：原始表字段版本信息(origin_field)
begin
  proc_create_table('ORIGIN_FIELD',
  'CREATE TABLE "ORIGIN_FIELD" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "TABLE_KEY" NVARCHAR2(128),
    "TYPE" NVARCHAR2(32),
    "DESCR" NVARCHAR2(1024),
    "OP_TYPE" NVARCHAR2(32),
    "BATCH_NO" NVARCHAR2(128)
)');
end;
/
COMMENT ON COLUMN "ORIGIN_FIELD"."KEY" IS '表唯一标识';
COMMENT ON COLUMN "ORIGIN_FIELD"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "ORIGIN_FIELD"."NAME" IS '表英文名称';
COMMENT ON COLUMN "ORIGIN_FIELD"."TABLE_KEY" IS '引用原始表的key字段';
COMMENT ON COLUMN "ORIGIN_FIELD"."TYPE" IS '字段类型';
COMMENT ON COLUMN "ORIGIN_FIELD"."DESCR" IS '字段描述';
COMMENT ON COLUMN "ORIGIN_FIELD"."OP_TYPE" IS '操作类型,值范围：upsert-新增或更新，delete-删除';
COMMENT ON COLUMN "ORIGIN_FIELD"."BATCH_NO" IS '同步批次';
COMMENT ON TABLE "ORIGIN_FIELD" IS '原始表字段版本信息';
/

-- 表：图谱信息(graph)
begin
  proc_create_table('GRAPH',
  'CREATE TABLE "GRAPH" (
	"ID" NUMBER(11) NOT NULL,
	"TYPE" NVARCHAR2(32),
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "SPACE_ID" NUMBER(11),
    "NODE_TYPE_COUNT" NUMBER(11),
    "NODE_AMOUNT" NUMBER(11),
    "EDGE_TYPE_COUNT" NUMBER(11),
    "EDGE_AMOUNT" NUMBER(11),
    "EDGE_AND_NODE_TYPE_TOTAL" NUMBER(11),
    "EDGE_AND_NODE_TOTAL" NUMBER(11),
    "ORG_ID" NUMBER(11),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH"."TYPE" IS '图谱类型';
COMMENT ON COLUMN "GRAPH"."KEY" IS '图谱唯一标识';
COMMENT ON COLUMN "GRAPH"."NAME_CN" IS '图谱中文名称';
COMMENT ON COLUMN "GRAPH"."NAME" IS '图谱英文名称';
COMMENT ON COLUMN "GRAPH"."SPACE_ID" IS '子图空间ID';
COMMENT ON COLUMN "GRAPH"."NODE_TYPE_COUNT" IS '实体类型数量';
COMMENT ON COLUMN "GRAPH"."NODE_AMOUNT" IS '实体数据量';
COMMENT ON COLUMN "GRAPH"."EDGE_TYPE_COUNT" IS '关系类型数量';
COMMENT ON COLUMN "GRAPH"."EDGE_AMOUNT" IS '关系数据量';
COMMENT ON COLUMN "GRAPH"."EDGE_AND_NODE_TYPE_TOTAL" IS '实体关系类型总数据量';
COMMENT ON COLUMN "GRAPH"."EDGE_AND_NODE_TOTAL" IS '实体关系总数据量';
COMMENT ON COLUMN "GRAPH"."ORG_ID" IS '所属组织ID';
COMMENT ON COLUMN "GRAPH"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "GRAPH"."UPDATED_DT" IS '更新时间';
COMMENT ON TABLE "GRAPH" IS '应用子图信息';
/

-- 表：通用图谱信息(common_graph)
begin
  proc_create_table('COMMON_GRAPH',
  'CREATE TABLE "COMMON_GRAPH" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "NODE_TYPE_COUNT" NUMBER(11),
    "NODE_AMOUNT" NUMBER(11),
    "EDGE_TYPE_COUNT" NUMBER(11),
    "EDGE_AMOUNT" NUMBER(11),
    "EDGE_AND_NODE_TYPE_TOTAL" NUMBER(11),
    "EDGE_AND_NODE_TOTAL" NUMBER(11),
    "ORG_ID" NUMBER(11),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "COMMON_GRAPH"."KEY" IS '图谱唯一标识';
COMMENT ON COLUMN "COMMON_GRAPH"."NAME_CN" IS '图谱中文名称';
COMMENT ON COLUMN "COMMON_GRAPH"."NAME" IS '图谱英文名称';
COMMENT ON COLUMN "COMMON_GRAPH"."NODE_TYPE_COUNT" IS '实体类型数量';
COMMENT ON COLUMN "COMMON_GRAPH"."NODE_AMOUNT" IS '实体数据量';
COMMENT ON COLUMN "COMMON_GRAPH"."EDGE_TYPE_COUNT" IS '关系类型数量';
COMMENT ON COLUMN "COMMON_GRAPH"."EDGE_AMOUNT" IS '关系数据量';
COMMENT ON COLUMN "COMMON_GRAPH"."EDGE_AND_NODE_TYPE_TOTAL" IS '实体关系类型总数据量';
COMMENT ON COLUMN "COMMON_GRAPH"."EDGE_AND_NODE_TOTAL" IS '实体关系总数据量';
COMMENT ON COLUMN "COMMON_GRAPH"."ORG_ID" IS '所属组织ID';
COMMENT ON COLUMN "COMMON_GRAPH"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "COMMON_GRAPH"."UPDATED_DT" IS '更新时间';
COMMENT ON TABLE "COMMON_GRAPH" IS '通用图谱信息';
/


-- 表：应用子图信息(app_sub_graph)
begin
  proc_create_table('APP_SUB_GRAPH',
  'CREATE TABLE "APP_SUB_GRAPH" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "SPACE_ID" NUMBER(11),
    "NODE_TYPE_COUNT" NUMBER(11),
    "NODE_AMOUNT" NUMBER(11),
    "EDGE_TYPE_COUNT" NUMBER(11),
    "EDGE_AMOUNT" NUMBER(11),
    "EDGE_AND_NODE_TYPE_TOTAL" NUMBER(11),
    "EDGE_AND_NODE_TOTAL" NUMBER(11),
    "ORG_ID" NUMBER(11),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "APP_SUB_GRAPH"."KEY" IS '图谱唯一标识';
COMMENT ON COLUMN "APP_SUB_GRAPH"."NAME_CN" IS '图谱中文名称';
COMMENT ON COLUMN "APP_SUB_GRAPH"."NAME" IS '图谱英文名称';
COMMENT ON COLUMN "APP_SUB_GRAPH"."SPACE_ID" IS '子图空间ID';
COMMENT ON COLUMN "APP_SUB_GRAPH"."NODE_TYPE_COUNT" IS '实体类型数量';
COMMENT ON COLUMN "APP_SUB_GRAPH"."NODE_AMOUNT" IS '实体数据量';
COMMENT ON COLUMN "APP_SUB_GRAPH"."EDGE_TYPE_COUNT" IS '关系类型数量';
COMMENT ON COLUMN "APP_SUB_GRAPH"."EDGE_AMOUNT" IS '关系数据量';
COMMENT ON COLUMN "APP_SUB_GRAPH"."EDGE_AND_NODE_TYPE_TOTAL" IS '实体关系类型总数据量';
COMMENT ON COLUMN "APP_SUB_GRAPH"."EDGE_AND_NODE_TOTAL" IS '实体关系总数据量';
COMMENT ON COLUMN "APP_SUB_GRAPH"."ORG_ID" IS '所属组织ID';
COMMENT ON COLUMN "APP_SUB_GRAPH"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "APP_SUB_GRAPH"."UPDATED_DT" IS '更新时间';
COMMENT ON TABLE "APP_SUB_GRAPH" IS '应用子图信息';
/

-- 表：图谱表版本信息(GRAPH_TABLE_VERSION)
begin
  proc_create_table('GRAPH_TABLE_VERSION',
  'CREATE TABLE "GRAPH_TABLE_VERSION" (
    "ID" NUMBER(11) NOT NULL,
    "TABLE_KEY" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "VERSION_NUM" NUMBER(11),
    "CREATED_BY" NUMBER(11),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_TABLE_VERSION"."TABLE_KEY" IS '表唯一标识';
COMMENT ON COLUMN "GRAPH_TABLE_VERSION"."NAME" IS '版本号';
COMMENT ON COLUMN "GRAPH_TABLE_VERSION"."CREATED_BY" IS '创建用户ID';
COMMENT ON COLUMN "GRAPH_TABLE_VERSION"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "GRAPH_TABLE_VERSION" IS '图谱表版本信息';
/

-- 表：图谱表信息(GRAPH_TABLE)
begin
  proc_create_table('GRAPH_TABLE',
  'CREATE TABLE "GRAPH_TABLE" (
    "ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "GRAPH_ID" NUMBER(11),
    "GRAPH_TYPE" NVARCHAR2(32),
    "TYPE" NVARCHAR2(32),
    "DESCR" NVARCHAR2(1024),
    "FIELD_NUM" NUMBER,
    "AMOUNT" NUMBER,
    "COMMON_GRAPH_COUNT" NUMBER(11),
    "APP_SUB_GRAPH_COUNT" NUMBER(11),
    "VERSION_ID" NUMBER(11),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_TABLE"."KEY" IS '表唯一标识';
COMMENT ON COLUMN "GRAPH_TABLE"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "GRAPH_TABLE"."NAME" IS '表英文名称';
COMMENT ON COLUMN "GRAPH_TABLE"."GRAPH_ID" IS '关联图谱唯一标识';
COMMENT ON COLUMN "GRAPH_TABLE"."GRAPH_TYPE" IS '关联图谱类型，值范围：common-通用图谱，app_sub-应用子图';
COMMENT ON COLUMN "GRAPH_TABLE"."TYPE" IS '表类型，值范围：node-实体，edge-关系';
COMMENT ON COLUMN "GRAPH_TABLE"."DESCR" IS '表描述';
COMMENT ON COLUMN "GRAPH_TABLE"."FIELD_NUM" IS '字段数量';
COMMENT ON COLUMN "GRAPH_TABLE"."AMOUNT" IS '记录条数';
COMMENT ON COLUMN "GRAPH_TABLE"."COMMON_GRAPH_COUNT" IS '关联通用图谱数量';
COMMENT ON COLUMN "GRAPH_TABLE"."APP_SUB_GRAPH_COUNT" IS '关联应用子图数量';
COMMENT ON COLUMN "GRAPH_TABLE"."VERSION_ID" IS '关联版本ID';
COMMENT ON COLUMN "GRAPH_TABLE"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "GRAPH_TABLE"."UPDATED_DT" IS '更新时间';
COMMENT ON TABLE "GRAPH_TABLE" IS '图谱表信息';
/

-- 表：表关系起点与终点
begin
  proc_create_table('EDGE_RELATION',
  'CREATE TABLE "EDGE_RELATION" (
    "ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "EDGE_ID" NUMBER(11) NOT NULL,
    "START_NODE_ID" NUMBER(11) NOT NULL,
    "START_NODE_NAME" NVARCHAR2(128),
    "START_NODE_NAMECN" NVARCHAR2(128),
    "END_NODE_ID" NUMBER(11) NOT NULL,
    "END_NODE_NAME" NVARCHAR2(128),
    "END_NODE_NAMECN" NVARCHAR2(128),
    "TABLE_KEY" NVARCHAR2(128),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "EDGE_RELATION"."KEY" IS '关联表唯一标识';
COMMENT ON COLUMN "EDGE_RELATION"."EDGE_ID" IS '关系表ID';
COMMENT ON COLUMN "EDGE_RELATION"."START_NODE_ID" IS '起点实体表ID';
COMMENT ON COLUMN "EDGE_RELATION"."START_NODE_NAME" IS '起点实体表英文名称';
COMMENT ON COLUMN "EDGE_RELATION"."START_NODE_NAMECN" IS '起点实体表中文名称';
COMMENT ON COLUMN "EDGE_RELATION"."END_NODE_NAME" IS '结束实体表英文名称';
COMMENT ON COLUMN "EDGE_RELATION"."END_NODE_NAMECN" IS '结束实体表中文名称';
COMMENT ON COLUMN "EDGE_RELATION"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "EDGE_RELATION"."TABLE_KEY" IS '关联表key';
COMMENT ON TABLE "EDGE_RELATION" IS '关系起点与终点';
/

-- 表：表关系起点与终点历史版本（关系表实体对历史版本）
begin
  proc_create_table('EDGE_RELATION_HISTORY',
  'CREATE TABLE "EDGE_RELATION_HISTORY" (
	"ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
	"TABLE_HISTORY_ID" NUMBER(11),
	"EDGE_ID" NUMBER(11),
	"START_NODE_ID" NUMBER(11),
    "START_NODE_NAME" NVARCHAR2(128),
    "START_NODE_NAMECN" NVARCHAR2(128),
	"END_NODE_ID" NUMBER(11),
    "END_NODE_NAME" NVARCHAR2(128),
    "END_NODE_NAMECN" NVARCHAR2(128),
    "TABLE_KEY" NVARCHAR2(128),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."KEY" IS '关联表唯一标识';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."TABLE_HISTORY_ID" IS '关系表历史记录ID';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."EDGE_ID" IS '关系表ID';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."START_NODE_NAME" IS '起点实体表英文名称';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."START_NODE_NAMECN" IS '起点实体表中文名称';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."END_NODE_NAME" IS '结束实体表英文名称';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."END_NODE_NAMECN" IS '结束实体表中文名称';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "EDGE_RELATION_HISTORY"."TABLE_KEY" IS '关联表key';
COMMENT ON TABLE "EDGE_RELATION_HISTORY" IS '关系起点与终点历史版本';
/

-- 表：图谱表历史版本信息(GRAPH_TABLE_HISTORY)
begin
  proc_create_table('GRAPH_TABLE_HISTORY',
  'CREATE TABLE "GRAPH_TABLE_HISTORY" (
    "ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "GRAPH_ID" NUMBER(11),
    "GRAPH_TYPE" NVARCHAR2(32),
    "TYPE" NVARCHAR2(32),
    "DESCR" NVARCHAR2(1024),
    "AMOUNT" NUMBER,
    "COMMON_GRAPH_COUNT" NUMBER(11),
    "APP_SUB_GRAPH_COUNT" NUMBER(11),
    "VERSION_ID" NUMBER(11),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."KEY" IS '表唯一标识';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."NAME" IS '表英文名称';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."GRAPH_ID" IS '关联图谱唯一标识';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."GRAPH_TYPE" IS '关联图谱类型，值范围：common-通用图谱，app_sub-应用子图';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."TYPE" IS '表类型，值范围：node-实体，edge-关系';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."DESCR" IS '表描述';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."AMOUNT" IS '记录条数';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."COMMON_GRAPH_COUNT" IS '关联通用图谱数量';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."APP_SUB_GRAPH_COUNT" IS '关联应用子图数量';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."VERSION_ID" IS '关联版本ID';
COMMENT ON COLUMN "GRAPH_TABLE_HISTORY"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "GRAPH_TABLE_HISTORY" IS '图谱表历史版本信息';
/

-- 表：表字段信息(graph_field)
begin
  proc_create_table('GRAPH_FIELD',
  'CREATE TABLE "GRAPH_FIELD" (
    "ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "TABLE_ID" NUMBER(11),
    "TYPE" NVARCHAR2(32),
    "DESCR" NVARCHAR2(1024),
    "CREATED_DT" DATE,
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_FIELD"."KEY" IS '表唯一标识';
COMMENT ON COLUMN "GRAPH_FIELD"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "GRAPH_FIELD"."NAME" IS '表英文名称';
COMMENT ON COLUMN "GRAPH_FIELD"."TABLE_ID" IS '关联表的ID';
COMMENT ON COLUMN "GRAPH_FIELD"."TYPE" IS '字段类型';
COMMENT ON COLUMN "GRAPH_FIELD"."DESCR" IS '字段描述';
COMMENT ON COLUMN "GRAPH_FIELD"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "GRAPH_FIELD"."UPDATED_DT" IS '更新时间';
COMMENT ON TABLE "GRAPH_FIELD" IS '表字段信息';
/

-- 表：表字段历史版本信息(graph_field_history)
begin
  proc_create_table('GRAPH_FIELD_HISTORY',
  'CREATE TABLE "GRAPH_FIELD_HISTORY" (
    "ID" NUMBER(11) NOT NULL,
    "KEY" NVARCHAR2(128),
    "NAME_CN" NVARCHAR2(128),
    "NAME" NVARCHAR2(128),
    "TABLE_HISTORY_ID" NUMBER(11),
    "TYPE" NVARCHAR2(32),
    "DESCR" NVARCHAR2(1024),
    "CREATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."KEY" IS '表唯一标识';
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."NAME" IS '表英文名称';
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."TABLE_HISTORY_ID" IS '关联表历史版本的ID';
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."TYPE" IS '字段类型';
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."DESCR" IS '字段描述';
COMMENT ON COLUMN "GRAPH_FIELD_HISTORY"."CREATED_DT" IS '创建时间';
COMMENT ON TABLE "GRAPH_FIELD_HISTORY" IS '表字段历史版本信息';
/
-- 子图空间详情表
begin
   proc_create_table('SUB_GRAPH_SPACE',
'CREATE TABLE "SUB_GRAPH_SPACE" (
  "ID" NUMBER(11) NOT NULL,
  "ORG_ID" NUMBER(11),
  "NAME" NVARCHAR2(56),
  "BUSINESS_AREA" NVARCHAR2(100),
  "APPLY_SCENE" NVARCHAR2(100),
  "CLOUD_NODE" NVARCHAR2(35),
  "GRAPH_SERVER" NVARCHAR2(35),
  "DATA_SOURCE" NVARCHAR2(255),
  "ENABLED_FLAG" NCHAR(1) NOT NULL ,
  "CREATED_BY" NUMBER(11),
  "CREATED_DT" DATE,
  "UPDATED_BY" NUMBER(11),
  "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."ID" IS '主键';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."ORG_ID" IS '组织ID';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."NAME" IS '子图空间名称';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."BUSINESS_AREA" IS '业务领域';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."APPLY_SCENE" IS '应用场景';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."CLOUD_NODE" IS '大数据云节点';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."GRAPH_SERVER" IS '图库服务器';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."DATA_SOURCE" IS '数据来源 数组json格式存储';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."ENABLED_FLAG" IS '是否可用状态';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."CREATED_BY" IS '创建人';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."CREATED_DT" IS '创建时间';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."UPDATED_BY" IS '修改人';
COMMENT ON COLUMN "SUB_GRAPH_SPACE"."UPDATED_DT" IS '修改时间';
COMMENT ON TABLE "SUB_GRAPH_SPACE"  IS '子图空间详情表';
/

-- 子图空间申请记录表
begin
   proc_create_table('SUB_GRAPH_APPLY',
'CREATE TABLE "SUB_GRAPH_APPLY" (
  "ID" NUMBER(11) NOT NULL,
  "SPACE_ID" NUMBER(11),
  "APPLY_NO" NVARCHAR2(56),
  "ORG_ID" NUMBER(11),
  "NAME" NVARCHAR2(56),
  "BUSINESS_AREA" NVARCHAR2(100),
  "APPLY_SCENE" NVARCHAR2(100),
  "CLOUD_NODE" NVARCHAR2(35),
  "GRAPH_SERVER" NVARCHAR2(35),
  "DATA_SOURCE" NVARCHAR2(255),
  "REASON" NVARCHAR2(255),
  "APPLY_TYPE" NVARCHAR2(56),
  "STATUS" NVARCHAR2(35),
  "CREATED_BY" NUMBER(11),
  "CREATED_DT" DATE,
  "UPDATED_BY" NUMBER(11),
  "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."ID" IS '主键';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."SPACE_ID" IS '关联子图空间ID变更的时候使用';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."APPLY_NO" IS '申请ID';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."ORG_ID" IS '组织ID';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."NAME" IS '子图空间名称';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."BUSINESS_AREA" IS '业务领域';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."APPLY_SCENE" IS '应用场景';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."CLOUD_NODE" IS '大数据云节点';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."GRAPH_SERVER" IS '图库服务器';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."DATA_SOURCE" IS '数据来源 数组json格式存储';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."APPLY_TYPE" IS '申请类型 CREATED 新建;UPDATED 修改;DELETE 删除';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."STATUS" IS '状态 INIT 待审批 APPROVAL_COMPLETED 审批完成 REJECT 驳回';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."CREATED_DT" IS '申请时间';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."CREATED_BY" IS '申请人';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."UPDATED_BY" IS '审批人';
COMMENT ON COLUMN "SUB_GRAPH_APPLY"."UPDATED_DT" IS '审批时间';
COMMENT ON TABLE "SUB_GRAPH_APPLY"  IS '子图空间申请记录表';
/

-- 审批表
begin
   proc_create_table('EXAMINE_APPROVE_RECORD',
'CREATE TABLE "EXAMINE_APPROVE_RECORD" (
    "ID" NUMBER(11) NOT NULL,
    "APPLY_ID" NUMBER(11),
    "STATUS" NVARCHAR2(35),
    "APPROVAL_MSG" NVARCHAR2(255),
    "APPROVE_TYPE" NVARCHAR2(35),
    "REASON" NVARCHAR2(255),
    "UPDATED_BY" NUMBER(11),
    "UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."ID" IS '主键';
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."APPLY_ID" IS '申请表ID';
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."STATUS" IS '状态 APPROVAL_PENDING 待审批 APPROVED 审批完成 REJECT 驳回';
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."APPROVAL_MSG" IS '审批描述';
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."APPROVE_TYPE" IS '审批类型';
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."UPDATED_BY" IS '审批人';
COMMENT ON COLUMN "EXAMINE_APPROVE_RECORD"."UPDATED_DT" IS '审批时间';
COMMENT ON TABLE "EXAMINE_APPROVE_RECORD"  IS '审批表';
/

-- 本体申请，本体可视为图谱本体
-- drop table ONT_GRAPH_APPLY;
begin
proc_create_table('ONT_GRAPH_APPLY',
'CREATE TABLE "ONT_GRAPH_APPLY" (
"ID" NUMBER(11) NOT NULL,
"APPLY_NO" NVARCHAR2(128),
"APPLY_TYPE" NVARCHAR2(128),
"TYPE" NVARCHAR2(32),
"GRAPH_ID" NUMBER(11),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"DESIGN_TYPE" NVARCHAR2(128),
"APPLY_SCENE" NVARCHAR2(1024),
"SUB_GRAPH_ID" NUMBER(11),
"ORG_ID" NUMBER(11),
"REASON" NVARCHAR2(1024),
"EXTRA_GRAPH_INFO" NVARCHAR2(1024),
"AUDIT_STATE" NVARCHAR2(32),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."APPLY_NO" IS '申请ID';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."APPLY_TYPE" IS '申请类型';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."TYPE" IS '本体类型';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."GRAPH_ID" IS '本体ID';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."NAME" IS '本体英文名称';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."NAME_CN" IS '本体中文名称';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."DESIGN_TYPE" IS '设计方式，ONLINE-在线设计,UPLOAD-上传模型';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."APPLY_SCENE" IS '应用场景';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."SUB_GRAPH_ID" IS '子图空间';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."ORG_ID" IS '创建组织';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."REASON" IS '申请原因，等同变更原因、删除原因';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."EXTRA_GRAPH_INFO" IS '额外图谱信息';
COMMENT ON COLUMN "ONT_GRAPH_APPLY"."AUDIT_STATE" IS '审批状态';
COMMENT ON TABLE "ONT_GRAPH_APPLY"  IS '本体申请，本体可视为图谱本体';
/
-- 本体，本体可视为图谱本体
-- drop table ONT_GRAPH;
begin
proc_create_table('ONT_GRAPH',
'CREATE TABLE "ONT_GRAPH" (
"ID" NUMBER(11) NOT NULL,
"TYPE" NVARCHAR2(32),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"APPLY_SCENE" NVARCHAR2(1024),
"SUB_GRAPH_ID" NUMBER(11),
"ORG_ID" NUMBER(11),
"EXTRA_GRAPH_INFO" NVARCHAR2(1024),
"DESIGN_TYPE" NVARCHAR2(128),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_GRAPH"."TYPE" IS '本体类型';
COMMENT ON COLUMN "ONT_GRAPH"."NAME" IS '本体英文名称';
COMMENT ON COLUMN "ONT_GRAPH"."NAME_CN" IS '本体中文名称';
COMMENT ON COLUMN "ONT_GRAPH"."APPLY_SCENE" IS '应用场景';
COMMENT ON COLUMN "ONT_GRAPH"."SUB_GRAPH_ID" IS '子图空间';
COMMENT ON COLUMN "ONT_GRAPH"."ORG_ID" IS '创建组织';
COMMENT ON COLUMN "ONT_GRAPH"."EXTRA_GRAPH_INFO" IS '额外图谱信息';
COMMENT ON COLUMN "ONT_GRAPH"."DESIGN_TYPE" IS '设计方式，ONLINE-在线设计,UPLOAD-上传模型';
COMMENT ON TABLE "ONT_GRAPH"  IS '本体，本体可视为图谱本体';
/
-- 本体表
-- drop table ONT_SCHEMA;
begin
proc_create_table('ONT_SCHEMA',
'CREATE TABLE "ONT_SCHEMA" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH" NVARCHAR2(128),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"DESCR" NVARCHAR2(1024),
"TYPE" NVARCHAR2(32),
"DIRECTED" NUMBER(1),
"GRAPH_TYPE" NVARCHAR2(32),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_SCHEMA"."GRAPH_ID" IS '图ID';
COMMENT ON COLUMN "ONT_SCHEMA"."GRAPH" IS '图英文名称';
COMMENT ON COLUMN "ONT_SCHEMA"."NAME" IS '表英文名称';
COMMENT ON COLUMN "ONT_SCHEMA"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "ONT_SCHEMA"."DESCR" IS '描述';
COMMENT ON COLUMN "ONT_SCHEMA"."TYPE" IS '类型';
COMMENT ON COLUMN "ONT_SCHEMA"."GRAPH_TYPE" IS '图谱类型';
COMMENT ON COLUMN "ONT_SCHEMA"."DIRECTED" IS '是否有方向';
COMMENT ON TABLE "ONT_SCHEMA"  IS '本体表';
/
-- 本体关系实体
-- drop table ONT_EDGE_NODE;
begin
proc_create_table('ONT_EDGE_NODE',
'CREATE TABLE "ONT_EDGE_NODE" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH" NVARCHAR2(128),
"EDGE_ID" NUMBER(11),
"EDGE" NVARCHAR2(128),
"START_NODE_ID" NUMBER(11),
"START_NODE" NVARCHAR2(128),
"END_NODE_ID" NUMBER(11),
"END_NODE" NVARCHAR2(128),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_EDGE_NODE"."GRAPH_ID" IS '图本体ID';
COMMENT ON COLUMN "ONT_EDGE_NODE"."GRAPH" IS '图英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE"."EDGE_ID" IS '关系表ID';
COMMENT ON COLUMN "ONT_EDGE_NODE"."EDGE" IS '关系表英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE"."START_NODE_ID" IS '起点实体表ID';
COMMENT ON COLUMN "ONT_EDGE_NODE"."START_NODE" IS '起点实体表英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE"."END_NODE_ID" IS '终点实体表ID';
COMMENT ON COLUMN "ONT_EDGE_NODE"."END_NODE" IS '终点实体表英文名称';
COMMENT ON TABLE "ONT_EDGE_NODE"  IS '本体关系实体';
/
-- 本体字段
-- drop table ONT_FIELD;
begin
proc_create_table('ONT_FIELD',
'CREATE TABLE "ONT_FIELD" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH" NVARCHAR2(128),
"SCHEMA_ID" NUMBER(11),
"SCHEMA" NVARCHAR2(128),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"DESCR" NVARCHAR2(1024),
"TYPE" NVARCHAR2(32),
"IS_MAIN" NUMBER(1),
"IS_IDENTITY" NUMBER(1),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_FIELD"."GRAPH_ID" IS '图ID';
COMMENT ON COLUMN "ONT_FIELD"."GRAPH" IS '图英文名称';
COMMENT ON COLUMN "ONT_FIELD"."SCHEMA_ID" IS '表ID';
COMMENT ON COLUMN "ONT_FIELD"."SCHEMA" IS '表英文名称';
COMMENT ON COLUMN "ONT_FIELD"."NAME" IS '字段英文名称';
COMMENT ON COLUMN "ONT_FIELD"."NAME_CN" IS '字段中文名称';
COMMENT ON COLUMN "ONT_FIELD"."DESCR" IS '描述';
COMMENT ON COLUMN "ONT_FIELD"."TYPE" IS '字段类型';
COMMENT ON COLUMN "ONT_FIELD"."IS_MAIN" IS '是否为主标识，取值[0-否，1-是]';
COMMENT ON COLUMN "ONT_FIELD"."IS_IDENTITY" IS '是否为实体标识，取值[0-否，1-是]';
COMMENT ON TABLE "ONT_FIELD"  IS '本体字段';
/
-- 本体历史版本
-- drop table ONT_GRAPH_VERSION;
begin
proc_create_table('ONT_GRAPH_VERSION',
'CREATE TABLE "ONT_GRAPH_VERSION" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"NAME" NVARCHAR2(128),
"IS_CURRENT" NUMBER(1),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_GRAPH_VERSION"."GRAPH_ID" IS '图本体ID';
COMMENT ON COLUMN "ONT_GRAPH_VERSION"."NAME" IS '版本名称';
COMMENT ON COLUMN "ONT_GRAPH_VERSION"."IS_CURRENT" IS '是否当前版本';
COMMENT ON TABLE "ONT_GRAPH_VERSION"  IS '本体历史版本';
/
-- 本体表历史版本
-- drop table ONT_GRAPH_HISTORY;
begin
proc_create_table('ONT_GRAPH_HISTORY',
'CREATE TABLE "ONT_GRAPH_HISTORY" (
"ID" NUMBER(11) NOT NULL,
"TYPE" NVARCHAR2(32),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"APPLY_SCENE" NVARCHAR2(1024),
"SUB_GRAPH_ID" NUMBER(11),
"ORG_ID" NUMBER(11),
"EXTRA_GRAPH_INFO" NVARCHAR2(1024),
"DESIGN_TYPE" NVARCHAR2(128),
"VERSION_ID" NUMBER(11) NOT NULL,
"ORI_GRAPH_ID" NUMBER(11),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."TYPE" IS '本体类型';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."NAME" IS '本体英文名称';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."NAME_CN" IS '本体中文名称';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."APPLY_SCENE" IS '应用场景';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."SUB_GRAPH_ID" IS '子图空间';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."ORG_ID" IS '创建组织';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."EXTRA_GRAPH_INFO" IS '额外图谱信息';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."DESIGN_TYPE" IS '设计方式，ONLINE-在线设计,UPLOAD-上传模型';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."VERSION_ID" IS '版本ID';
COMMENT ON COLUMN "ONT_GRAPH_HISTORY"."ORI_GRAPH_ID" IS '来源本体ID';
COMMENT ON TABLE "ONT_GRAPH_HISTORY"  IS '本体，本体可视为图谱本体';
/
-- 本体表历史
-- drop table ONT_SCHEMA_HISTORY;
begin
proc_create_table('ONT_SCHEMA_HISTORY',
'CREATE TABLE "ONT_SCHEMA_HISTORY" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH" NVARCHAR2(128),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"DESCR" NVARCHAR2(1024),
"TYPE" NVARCHAR2(32),
"DIRECTED" NUMBER(1),
"VERSION_ID" NUMBER(11),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."GRAPH_ID" IS '图ID';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."GRAPH" IS '图英文名称';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."NAME" IS '表英文名称';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."NAME_CN" IS '表中文名称';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."DESCR" IS '描述';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."TYPE" IS '类型';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."DIRECTED" IS '是否有方向';
COMMENT ON COLUMN "ONT_SCHEMA_HISTORY"."VERSION_ID" IS '版本ID';
COMMENT ON TABLE "ONT_SCHEMA_HISTORY"  IS '本体表';
/
-- 本体关系实体历史
-- drop table ONT_EDGE_NODE_HISTORY;
begin
proc_create_table('ONT_EDGE_NODE_HISTORY',
'CREATE TABLE "ONT_EDGE_NODE_HISTORY" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH" NVARCHAR2(128),
"EDGE_ID" NUMBER(11),
"EDGE" NVARCHAR2(128),
"START_NODE_ID" NUMBER(11),
"START_NODE" NVARCHAR2(128),
"END_NODE_ID" NUMBER(11),
"END_NODE" NVARCHAR2(128),
"VERSION_ID" NUMBER(11),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."GRAPH_ID" IS '图本体ID';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."GRAPH" IS '图英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."EDGE_ID" IS '关系表ID';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."EDGE" IS '关系表英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."START_NODE_ID" IS '起点实体表ID';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."START_NODE" IS '起点实体表英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."END_NODE_ID" IS '终点实体表ID';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."END_NODE" IS '终点实体表英文名称';
COMMENT ON COLUMN "ONT_EDGE_NODE_HISTORY"."VERSION_ID" IS '版本ID';
COMMENT ON TABLE "ONT_EDGE_NODE_HISTORY"  IS '本体关系实体';
/
-- 本体字段历史
-- drop table ONT_FIELD_HISTORY;
begin
proc_create_table('ONT_FIELD_HISTORY',
'CREATE TABLE "ONT_FIELD_HISTORY" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH" NVARCHAR2(128),
"SCHEMA_ID" NUMBER(11),
"SCHEMA" NVARCHAR2(128),
"NAME" NVARCHAR2(128),
"NAME_CN" NVARCHAR2(128),
"DESCR" NVARCHAR2(1024),
"TYPE" NVARCHAR2(32),
"IS_MAIN" NUMBER(1),
"IS_IDENTITY" NUMBER(1),
"VERSION_ID" NUMBER(11),
"ENABLED_FLAG" NCHAR(1) NOT NULL ,
"CREATED_BY" NVARCHAR2(50) ,
"CREATED_DT" DATE ,
"UPDATED_BY" NVARCHAR2(50) ,
"UPDATED_DT" DATE
)');
end;
/
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."GRAPH_ID" IS '图ID';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."GRAPH" IS '图英文名称';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."SCHEMA_ID" IS '表ID';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."SCHEMA" IS '表英文名称';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."NAME" IS '字段英文名称';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."NAME_CN" IS '字段中文名称';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."DESCR" IS '描述';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."TYPE" IS '字段类型';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."IS_MAIN" IS '是否为主标识，取值[0-否，1-是]';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."IS_IDENTITY" IS '是否为实体标识，取值[0-否，1-是]';
COMMENT ON COLUMN "ONT_FIELD_HISTORY"."VERSION_ID" IS '版本ID';
COMMENT ON TABLE "ONT_FIELD_HISTORY"  IS '本体字段';
/

-- 表数据日统计
-- drop table TABLE_DAY_STATIS;
begin
proc_create_table('TABLE_DAY_STATIS',
'CREATE TABLE "TABLE_DAY_STATIS" (
"ID" NUMBER(11) NOT NULL,
"TABLE_ID" NUMBER(11),
"TABLE_TYPE" NVARCHAR2(128),
"DATA_AMOUNT" NUMBER(11),
"STATIS_DT" DATE
)');
end;
/
COMMENT ON COLUMN "TABLE_DAY_STATIS"."ID" IS 'id';
COMMENT ON COLUMN "TABLE_DAY_STATIS"."TABLE_ID" IS '表ID';
COMMENT ON COLUMN "TABLE_DAY_STATIS"."TABLE_TYPE" IS '表类型';
COMMENT ON COLUMN "TABLE_DAY_STATIS"."DATA_AMOUNT" IS '数据条数';
COMMENT ON COLUMN "TABLE_DAY_STATIS"."STATIS_DT" IS '记录创建时间统计时间';
COMMENT ON TABLE "TABLE_DAY_STATIS"  IS '表数据日统计';
/
-- 表数据月统计
-- drop table TABLE_MONTH_STATIS;
begin
proc_create_table('TABLE_MONTH_STATIS',
'CREATE TABLE "TABLE_MONTH_STATIS" (
"ID" NUMBER(11) NOT NULL,
"TABLE_ID" NUMBER(11),
"TABLE_TYPE" NVARCHAR2(128),
"DATA_AMOUNT" NUMBER(11),
"STATIS_DT" DATE
)');
end;
/
COMMENT ON COLUMN "TABLE_MONTH_STATIS"."ID" IS 'id';
COMMENT ON COLUMN "TABLE_MONTH_STATIS"."TABLE_ID" IS '表ID';
COMMENT ON COLUMN "TABLE_MONTH_STATIS"."TABLE_TYPE" IS '表类型';
COMMENT ON COLUMN "TABLE_MONTH_STATIS"."DATA_AMOUNT" IS '数据条数';
COMMENT ON COLUMN "TABLE_MONTH_STATIS"."STATIS_DT" IS '记录创建时间统计时间';
COMMENT ON TABLE "TABLE_MONTH_STATIS"  IS '表数据月统计';
/
-- 图谱数据月统计
-- drop table GRAPH_MONTH_STATIS;
begin
proc_create_table('GRAPH_MONTH_STATIS',
'CREATE TABLE "GRAPH_MONTH_STATIS" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH_TYPE" NVARCHAR2(128),
"DATA_AMOUNT" NUMBER(11),
"STATIS_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_MONTH_STATIS"."ID" IS 'id';
COMMENT ON COLUMN "GRAPH_MONTH_STATIS"."GRAPH_ID" IS '图谱ID';
COMMENT ON COLUMN "GRAPH_MONTH_STATIS"."GRAPH_TYPE" IS '图谱类型';
COMMENT ON COLUMN "GRAPH_MONTH_STATIS"."DATA_AMOUNT" IS '数据条数';
COMMENT ON COLUMN "GRAPH_MONTH_STATIS"."STATIS_DT" IS '记录创建时间统计时间';
COMMENT ON TABLE "GRAPH_MONTH_STATIS"  IS '图谱数据月统计';
/
-- 图谱数据日统计
-- drop table GRAPH_DAY_STATIS;
begin
proc_create_table('GRAPH_DAY_STATIS',
'CREATE TABLE "GRAPH_DAY_STATIS" (
"ID" NUMBER(11) NOT NULL,
"GRAPH_ID" NUMBER(11),
"GRAPH_TYPE" NVARCHAR2(128),
"DATA_AMOUNT" NUMBER(11),
"STATIS_DT" DATE
)');
end;
/
COMMENT ON COLUMN "GRAPH_DAY_STATIS"."ID" IS 'id';
COMMENT ON COLUMN "GRAPH_DAY_STATIS"."GRAPH_ID" IS '图谱ID';
COMMENT ON COLUMN "GRAPH_DAY_STATIS"."GRAPH_TYPE" IS '图谱类型';
COMMENT ON COLUMN "GRAPH_DAY_STATIS"."DATA_AMOUNT" IS '数据条数';
COMMENT ON COLUMN "GRAPH_DAY_STATIS"."STATIS_DT" IS '记录创建时间统计时间';
COMMENT ON TABLE "GRAPH_DAY_STATIS"  IS '图谱数据日统计';
/
-- 图谱概要数据日统计
-- drop table SUMMARY_DAY_STATIS;
begin
proc_create_table('SUMMARY_DAY_STATIS',
'CREATE TABLE "SUMMARY_DAY_STATIS" (
"ID" NUMBER(11) NOT NULL,
"BASE_GROUP_NODE_TYPE_COUNT" NUMBER(11),
"BASE_GROUP_EDGE_TYPE_COUNT" NUMBER(11),
"COMMON_GROUP_COUNT" NUMBER(11),
"APP_SUB_GROUP_COUNT" NUMBER(11),
"BASE_GROUP_DATA_AMOUNT" NUMBER(11),
"COMMON_GROUP_DATA_AMOUNT" NUMBER(11),
"APP_SUB_GROUP_DATA_AMOUNT" NUMBER(11),
"STATIS_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."ID" IS 'id';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."BASE_GROUP_NODE_TYPE_COUNT" IS '基础图谱实体种类的个数';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."BASE_GROUP_EDGE_TYPE_COUNT" IS '基础图谱关系种类的个数';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."COMMON_GROUP_COUNT" IS '通用图谱的个数';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."APP_SUB_GROUP_COUNT" IS '应用子图的个数';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."BASE_GROUP_DATA_AMOUNT" IS '基础图谱的数据量（数据条数）';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."COMMON_GROUP_DATA_AMOUNT" IS '通用图谱的数据量（数据条数）';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."APP_SUB_GROUP_DATA_AMOUNT" IS '应用子图的数据量（数据条数）';
COMMENT ON COLUMN "SUMMARY_DAY_STATIS"."STATIS_DT" IS '记录创建时间统计时间';
COMMENT ON TABLE "SUMMARY_DAY_STATIS"  IS '图谱概要数据日统计';
/
-- 图谱概要数据月统计
-- drop table SUMMARY_MONTH_STATIS;
begin
proc_create_table('SUMMARY_MONTH_STATIS',
'CREATE TABLE "SUMMARY_MONTH_STATIS" (
"ID" NUMBER(11) NOT NULL,
"BASE_GROUP_NODE_TYPE_COUNT" NUMBER(11),
"BASE_GROUP_EDGE_TYPE_COUNT" NUMBER(11),
"COMMON_GROUP_COUNT" NUMBER(11),
"APP_SUB_GROUP_COUNT" NUMBER(11),
"BASE_GROUP_DATA_AMOUNT" NUMBER(11),
"COMMON_GROUP_DATA_AMOUNT" NUMBER(11),
"APP_SUB_GROUP_DATA_AMOUNT" NUMBER(11),
"STATIS_DT" DATE
)');
end;
/
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."ID" IS 'id';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."BASE_GROUP_NODE_TYPE_COUNT" IS '基础图谱实体种类的个数';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."BASE_GROUP_EDGE_TYPE_COUNT" IS '基础图谱关系种类的个数';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."COMMON_GROUP_COUNT" IS '通用图谱的个数';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."APP_SUB_GROUP_COUNT" IS '应用子图的个数';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."BASE_GROUP_DATA_AMOUNT" IS '基础图谱的数据量（数据条数）';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."COMMON_GROUP_DATA_AMOUNT" IS '通用图谱的数据量（数据条数）';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."APP_SUB_GROUP_DATA_AMOUNT" IS '应用子图的数据量（数据条数）';
COMMENT ON COLUMN "SUMMARY_MONTH_STATIS"."STATIS_DT" IS '记录创建时间统计时间';
COMMENT ON TABLE "SUMMARY_MONTH_STATIS"  IS '图谱概要数据月统计';
/


DECLARE
  column_count INT;
BEGIN
    SELECT count(*) INTO column_count FROM user_sequences
        WHERE sequence_name = 'HIBERNATE_SEQUENCE';
    IF column_count = 0 THEN
        -- DROP SEQUENCE HIBERNATE_SEQUENCE;
        execute immediate 'CREATE OR REPLACE SEQUENCE HIBERNATE_SEQUENCE
        MINVALUE 1
        MAXVALUE 999999999999999999999999999
        START WITH 100000
        INCREMENT BY 1
        CACHE 100';
    END IF;
END;
/

COMMIT;